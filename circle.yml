machine:
  ruby:
    version: 2.2.4

dependencies:
  override:
    - bundle check --path=vendor/bundle || bundle install --path=vendor/bundle --jobs=4 --retry=3
    - JEKYLL_ENV=production bundle exec jekyll build

test:
  override:
    - echo "If you're happy and you know it clap your hands!!!"

deployment:
  production:
    branch: master
    commands:
      - aws s3 sync _site/ s3://rotemaf.info/ --delete --cache-control "public, max-age=30"
